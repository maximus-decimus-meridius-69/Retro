# Schema for Social Network with Courses and Meetings

type User @table {
  userId: String! @primary
  displayName: String!
  profilePic: String
  following: [String!]! @default(value: [])
  followers: [String!]! @default(value: [])
}

type Post @table {
  postId: UUID! @default(expr: "uuidV4()")
  userId: String!
  content: String!
  mediaUrl: String
  timestamp: Timestamp! @default(expr: "request.time")
}

type Message @table {
  messageId: UUID! @default(expr: "uuidV4()")
  senderId: String!
  receiverId: String!
  content: String!
  status: String! @default(value: "pending")
  timestamp: Timestamp! @default(expr: "request.time")
}

type Course @table {
  courseId: UUID! @default(expr: "uuidV4()")
  title: String!
  creatorId: String!
  enrolledUsers: [String!]! @default(value: [])
  materials: [String!]
}

type Meeting @table {
  meetingId: UUID! @default(expr: "uuidV4()")
  courseId: String!
  title: String!
  description: String
  scheduledTime: Timestamp!
  participants: [String!]!
}

type AudioRoom @table {
  id: UUID! @default(expr: "uuidV4()")
  title: String!
  description: String
  host_id: String!
  host_name: String!
  max_participants: Int! @default(value: 10)
  is_active: Boolean! @default(value: true)
  allow_chat: Boolean! @default(value: true)
  allow_media: Boolean! @default(value: false)
  allow_screen_share: Boolean! @default(value: false)
  is_muted_by_default: Boolean! @default(value: false)
  created_at: Timestamp! @default(expr: "request.time")
  updated_at: Timestamp! @default(expr: "request.time")
}

type RoomParticipant @table {
  id: UUID! @default(expr: "uuidV4()")
  room_id: UUID!
  user_id: String!
  user_name: String!
  is_host: Boolean! @default(value: false)
  is_muted: Boolean! @default(value: false)
  joined_at: Timestamp! @default(expr: "request.time")
}

type ChatMessage @table {
  id: UUID! @default(expr: "uuidV4()")
  room_id: UUID!
  user_id: String!
  user_name: String!
  message: String!
  message_type: String! @default(value: "text")
  media_url: String
  created_at: Timestamp! @default(expr: "request.time")
}
